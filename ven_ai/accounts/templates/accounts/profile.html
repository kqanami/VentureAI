{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="container-main">
  <div class="card border-0 shadow-lg rounded-3 overflow-hidden">
    <!-- Заголовок с градиентом -->
    <div class="card-header bg-primary bg-gradient py-4">
      <h1 class="h3 mb-0 text-white">
        <i class="bi bi-person-badge me-2"></i>Мой профиль
      </h1>
    </div>

    <div class="card-body p-4">
      <div class="row g-4">
        <!-- Боковая панель -->
        <div class="col-md-4 wow animate__fadeInLeft">
          <div class="position-relative">
            <div class="ratio ratio-1x1 rounded-4 overflow-hidden bg-light">
              <img src="{% static 'images/default_avatar.png' %}"
                   alt="Аватар"
                   class="object-fit-cover"
                   loading="lazy">
            </div>
            <div class="position-absolute bottom-0 end-0 m-3">
              <button class="btn btn-sm btn-dark rounded-pill"
                      data-bs-toggle="tooltip"
                      title="Изменить аватар">
                <i class="bi bi-camera"></i>
              </button>
            </div>
          </div>

          <div class="mt-4 text-center">
            <a href="{% url 'password_change' %}"
               class="btn btn-outline-primary w-100 rounded-pill py-2">
              <i class="bi bi-shield-lock me-2"></i>Сменить пароль
            </a>
          </div>
        </div>

        <!-- Основная информация -->
        <div class="col-md-8 wow animate__fadeInRight" data-wow-delay="0.1s">
          <div class="d-flex flex-column gap-3">
            <!-- Блок с основной информацией -->
            <div class="card bg-surface rounded-3 p-3">
              <h3 class="h5 mb-3"><i class="bi bi-person me-2"></i>Основная информация</h3>
              <dl class="row mb-0">
                <dt class="col-sm-4 text-secondary">Логин</dt>
                <dd class="col-sm-8">{{ request.user.username }}</dd>

                <dt class="col-sm-4 text-secondary">Email</dt>
                <dd class="col-sm-8">{{ request.user.email }}</dd>
              </dl>
            </div>

            <!-- Блок с статистикой -->
            <div class="card bg-surface rounded-3 p-3">
              <h3 class="h5 mb-3"><i class="bi bi-graph-up me-2"></i>Статистика</h3>
              <div class="row g-3">
                <div class="col-6">
                  <div class="p-3 text-center rounded-3 bg-primary text-white">
                    <div class="h2 mb-1">{{ request.user.tokens }}</div>
                    <small>Токенов</small>
                  </div>
                </div>
                <div class="col-6">
                  <div class="p-3 text-center rounded-3 bg-secondary text-white">
                    <div class="h2 mb-1">{{ request.user.free_analysis_count }}</div>
                    <small>Бесплатных анализов</small>
                  </div>
                </div>
              </div>
            </div>

            <!-- Дополнительные действия -->
            <div class="d-flex gap-2 flex-wrap">
              <a href="{% url 'buy_tokens' %}"
                 class="btn btn-primary rounded-pill px-4">
                <i class="bi bi-coin me-2"></i>Пополнить токены
              </a>
              <a href="{% url 'project_list' %}"
                 class="btn btn-outline-secondary rounded-pill px-4">
                <i class="bi bi-folder me-2"></i>Мои проекты
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}